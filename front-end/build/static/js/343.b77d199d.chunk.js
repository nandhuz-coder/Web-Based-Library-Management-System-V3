"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[343],{343:(s,a,e)=>{e.r(a),e.d(a,{default:()=>c});var l=e(43),r=e(216),n=e(213),d=e(843),o=e(466),i=e(314),t=e(579);const c=()=>{const[s,a]=(0,l.useState)(null),[e,c]=(0,l.useState)({oldPassword:"",newPassword:null,confirmPassword:""}),[m,h]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),b=(0,r.Zp)();(0,l.useEffect)((()=>{n.A.get("/admin/2/profile").then((s=>{a(s.data)})).catch((s=>{console.error("Error fetching user data:",s)}))}),[]);const j=s=>{const{name:a,value:e}=s.target;c((s=>({...s,[a]:e})))};return s?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.Suspense,{fallback:(0,t.jsx)(d.A,{}),children:[(0,t.jsx)(i.A,{}),(0,t.jsx)("header",{id:"main-header",className:"py-2 bg-primary text-white",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("h1",{children:[(0,t.jsx)("i",{className:"fa fa-user"})," Profile"]})})})})}),(0,t.jsx)(o.A,{success:m,error:u,dismissAlert:s=>{"error"===s?x(""):"success"===s&&h("")}}),(0,t.jsx)("section",{id:"profile",className:"py-4 mb-4 bg-faded",children:(0,t.jsx)("div",{className:"container-fluid",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("button",{onClick:()=>b("/admin"),className:"btn btn-secondary btn-block",children:[(0,t.jsx)("i",{className:"fa fa-arrow-left"})," Back To Dashboard"]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("button",{className:"btn btn-primary btn-block","data-toggle":"modal","data-target":"#userNameModal",children:[(0,t.jsx)("i",{className:"fa fa-user"})," Edit Profile"]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("button",{className:"btn btn-warning btn-block","data-toggle":"modal","data-target":"#passwordModal",children:[(0,t.jsx)("i",{className:"fa fa-lock"})," Update Password"]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("button",{onClick:()=>b("/auth/admin-signup"),className:"btn btn-success btn-block",children:[(0,t.jsx)("i",{className:"fa fa-plus"})," Add New Admin"]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsxs)("button",{className:"btn btn-danger btn-block","data-toggle":"modal","data-target":"#deleteProfileModal",children:[(0,t.jsx)("i",{className:"fa fa-close"})," Delete Account"]})})]})})}),(0,t.jsx)("section",{id:"profile-edit",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-7 mx-auto",style:{marginTop:20,marginBottom:20},children:(0,t.jsxs)("div",{className:"card p-3",style:{border:"1px solid black"},children:[(0,t.jsx)("div",{className:"card-header",style:{background:"rgb(231, 192, 93)"},children:(0,t.jsx)("h4",{className:"text-center",children:"Admin Info"})}),(0,t.jsxs)("div",{className:"card-block",style:{paddingTop:20},children:[(0,t.jsxs)("p",{style:{fontWeight:"bold",color:"darkblue",fontSize:20},children:["User name : ",s.username]}),(0,t.jsxs)("p",{style:{fontWeight:"bold",color:"rgb(19, 80, 22)",fontSize:20},children:["Email : ",s.email]})]})]})})})})}),(0,t.jsx)("div",{className:"modal fade",id:"passwordModal",children:(0,t.jsx)("div",{className:"modal-dialog modal-lg",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header bg-warning text-white",children:[(0,t.jsx)("h5",{className:"modal-title",id:"passwordModalLabel",children:"Edit Password"}),(0,t.jsx)("button",{className:"close","data-dismiss":"modal",children:(0,t.jsx)("span",{children:"\xd7"})})]}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("form",{onSubmit:s=>{s.preventDefault(),e.newPassword===e.confirmPassword?n.A.post("/admin/update-password",e).then((s=>{h("Password updated successfully")})).catch((s=>{console.error("Error updating password:",s),x("Error updating password")})):x("Passwords do not match!")},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"oldPassword",className:"form-control-label",children:"Old Password"}),(0,t.jsx)("input",{type:"password",name:"oldPassword",id:"oldPassword",className:"form-control",value:e.oldPassword,onChange:j})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"form-control-label",children:"New Password"}),(0,t.jsx)("input",{type:"password",name:"newPassword",id:"newPassword",className:"form-control",value:e.newPassword,onChange:j})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"form-control-label",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",className:"form-control",value:e.confirmPassword,onChange:j}),(0,t.jsx)("span",{id:"message",style:{color:e.newPassword===e.confirmPassword?"green":"red"},children:e.newPassword===e.confirmPassword?"Matched":"Not matched!"})]}),(0,t.jsx)("button",{id:"button",className:"btn btn-warning btn-block",disabled:e.newPassword!==e.confirmPassword,children:"Submit"})]})})]})})}),(0,t.jsx)("div",{className:"modal fade",id:"userNameModal",children:(0,t.jsx)("div",{className:"modal-dialog modal-lg",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,t.jsx)("h5",{className:"modal-title",id:"passwordModalLabel",children:"Edit Profile"}),(0,t.jsx)("button",{className:"close","data-dismiss":"modal",children:(0,t.jsx)("span",{children:"\xd7"})})]}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("form",{onSubmit:s=>{s.preventDefault();const e={username:s.target.username.value,email:s.target.email.value};n.A.post("/api/admin/edit/profile",e).then((s=>{h(s),a(e)})).catch((s=>{console.error("Error updating profile:",s),x(s)}))},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"username",className:"form-control-label",children:"Edit Username"}),(0,t.jsx)("input",{name:"username",type:"text",className:"form-control",defaultValue:s.username})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-control-label",children:"Edit Email"}),(0,t.jsx)("input",{name:"email",type:"email",id:"admin-edit-email",className:"form-control",defaultValue:s.email})]}),(0,t.jsx)("button",{className:"btn btn-primary btn-block",id:"update-profile-btn",children:"Update!"})]})})]})})}),(0,t.jsx)("div",{className:"modal fade",id:"deleteProfileModal",children:(0,t.jsx)("div",{className:"modal-dialog modal-lg",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header bg-danger text-white",children:[(0,t.jsx)("h5",{className:"modal-title",id:"deleteProfileModalLabel",children:"Once you press yes, you will lose the admin facility permanently. Are you sure?"}),(0,t.jsx)("button",{className:"close","data-dismiss":"modal",children:(0,t.jsx)("span",{children:"\xd7"})})]}),(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsx)("form",{onSubmit:s=>{s.preventDefault(),n.A.delete("/api/admin/delete-profile").then((s=>{h("Account deleted successfully"),b("/auth/admin-login")})).catch((s=>{console.error("Error deleting account:",s),x("Error deleting account")}))},children:(0,t.jsx)("input",{type:"submit",value:"Yes",className:"btn btn-danger btn-block m-1"})}),(0,t.jsx)("button",{className:"btn btn-success btn-block m-1","data-dismiss":"modal",children:"No"})]})]})})})]})}):(0,t.jsx)(d.A,{})}},314:(s,a,e)=>{e.d(a,{A:()=>i});var l=e(43),r=e(213),n=e(216),d=e(475),o=e(579);const i=()=>{const[s,a]=(0,l.useState)([]),[e,i]=(0,l.useState)(),t=async()=>{try{const s=await r.A.get("/api/global"),e=await s.data;a(e.global),i(e.currentUser)}catch(s){console.error("Error fetching data",s)}};(0,l.useEffect)((()=>{t();const s=setInterval((()=>{t()}),6e4);return()=>clearInterval(s)}),[]);const c=(0,n.Zp)();return(0,o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-0 sticky-top",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("a",{className:"navbar-brand",href:"/admin",children:"Home"}),(0,o.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,o.jsx)("span",{className:"navbar-toggler-icon"})}),(0,o.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,o.jsxs)("ul",{className:"navbar-nav",children:[(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsx)(d.N_,{to:"/admin/books/bookInventory/",id:"book_inventory",title:"Book Inventory",className:"nav-link",children:"Book Inventory"})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsx)(d.N_,{to:"/admin/1/users/",id:"users_list",title:"Users",className:"nav-link",children:"Users"})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsx)(d.N_,{to:"/admin/1/addbook",id:"add_book",title:"Add Books",className:"nav-link",children:"Add Books"})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsxs)(d.N_,{to:"/admin/1/book/stockout",id:"stock_out",title:"Stock Out",className:"nav-link",children:["StockOut\xa0",(0,o.jsx)("span",{className:"badge badge-danger",children:s.stock?s.stock:0})]})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsxs)(d.N_,{to:"/admin/1/book/request",id:"request",title:"request",className:"nav-link",children:["Request\xa0",(0,o.jsx)("span",{className:"badge badge-success",children:s.reqbook?s.reqbook:0})]})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsxs)(d.N_,{to:"/admin/1/book/return",id:"return",title:"return",className:"nav-link",children:["Return\xa0",(0,o.jsx)("span",{className:"badge badge-warning",children:s.return?s.return:0})]})}),(0,o.jsx)("li",{className:"nav-item px-2",children:(0,o.jsx)(d.N_,{to:"/books",title:"Browse Books",className:"nav-link",children:"Browse Books"})})]}),(0,o.jsx)("ul",{className:"navbar-nav ml-auto",children:e?(0,o.jsxs)("li",{className:"nav-item dropdown mr-3",children:[(0,o.jsxs)("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown",id:"admin-drop-down",children:[(0,o.jsx)("i",{className:"fa fa-user"})," Welcome ",e.username]}),(0,o.jsxs)("div",{className:"dropdown-menu",children:[(0,o.jsxs)(d.N_,{to:"/admin/1/profile",title:"profile",className:"dropdown-item",children:[(0,o.jsx)("i",{className:"fa fa-user-circle"})," Profile"]}),(0,o.jsxs)("a",{href:"",onClick:s=>(async s=>{try{s.preventDefault(),await r.A.get("/auth/1/user-logout"),c("/")}catch(a){c("/")}})(s),className:"dropdown-item",children:[(0,o.jsx)("i",{className:"fa fa-user-times"})," Logout"]}),(0,o.jsxs)(d.N_,{className:"dropdown-item",to:"/user/dashboard/1",children:[(0,o.jsx)("i",{className:"fa fa-gear"})," User Dashboard"]})]})]}):(0,o.jsx)("li",{className:"nav-item",children:(0,o.jsxs)("a",{href:"/login",className:"nav-link",children:[(0,o.jsx)("i",{className:"fa fa-gear"})," ProfileLogin"]})})})]})]})})}},466:(s,a,e)=>{e.d(a,{A:()=>r});e(43);var l=e(579);const r=s=>{let{error:a,success:e,warning:r,dismissAlert:n}=s;return(0,l.jsxs)("div",{className:"container my-2 sticky-top",children:[a&&a.length>0&&(0,l.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[a,(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("error"),children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),e&&e.length>0&&(0,l.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e,(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("success"),children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),r&&r.length>0&&(0,l.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[r,(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("warning"),children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}}}]);
//# sourceMappingURL=343.b77d199d.chunk.js.map