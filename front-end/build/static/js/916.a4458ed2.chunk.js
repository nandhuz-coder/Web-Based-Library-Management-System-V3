(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[916],{916:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(43),n=a(216),r=a(213),i=a(446),l=a.n(i),c=a(466),o=a(314),d=a(843),u=a(579);const m=()=>{const[e,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(1),[m,h]=(0,t.useState)(0),[x,j]=(0,t.useState)(""),[f,b]=(0,t.useState)(""),[g,p]=(0,t.useState)(""),[N,v]=(0,t.useState)([]),[k,y]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)(!0),_=(0,n.Zp)();(0,t.useEffect)((()=>{F(a)}),[a]);const F=async e=>{S(!0);try{const a=await r.A.get("/admin/users/".concat(e));s(a.data.users),i(a.data.current),h(a.data.pages),j("")}catch(a){j("Failed to fetch users.")}finally{C(!1)}},U=(0,t.useCallback)(l()((async e=>{try{const s=await r.A.get("/api/users/suggestions?q=".concat(e));v(s.data)}catch(s){j("Failed to fetch suggestions.")}}),300),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(d.A,{}),children:[(0,u.jsx)(o.A,{}),(0,u.jsx)("header",{id:"main-header",className:"py-2 bg-primary text-white",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("h1",{children:[(0,u.jsx)("i",{className:"fa fa-users"})," Users"]})})})})}),(0,u.jsx)("section",{id:"actions",className:"py-4 mb-4",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3 mr-auto",children:(0,u.jsxs)("button",{className:"btn btn-light btn-block",onClick:()=>_("/admin"),children:[(0,u.jsx)("i",{className:"fa fa-arrow-left"})," Back To Dashboard"]})}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsxs)("div",{className:"input-group",children:[(0,u.jsx)("input",{name:"searchUser",type:"text",className:"form-control",placeholder:"Search User by First Name, Last Name, username, E-mail",value:k,onChange:e=>{const s=e.target.value;y(s),s?U(s):v([])}}),(0,u.jsx)("span",{className:"input-group-btn",children:(0,u.jsx)("button",{className:"btn btn-primary",onClick:()=>{(async()=>{S(!0);try{const e=await r.A.post("/api/admin/users/1",{searchUser:k});e.data.error?j(e.data.error):(s(e.data.users),i(e.data.current),h(e.data.pages),j(""))}catch(e){j("Search failed.")}finally{S(!1),C(!1)}})()},children:"Search"})})]}),N.length>0&&(0,u.jsx)("ul",{className:"list-group suggestions-list",style:{position:"absolute",zIndex:1e3,width:"100%"},children:N.map((e=>(0,u.jsxs)("li",{className:"list-group-item list-group-item-action",onClick:()=>(e=>{y(e.username),v([])})(e),children:[e.firstName," ",e.lastName," (",e.username,")"]},e._id)))})]})]})})}),(0,u.jsx)(c.A,{error:x,success:f,warning:g,dismissAlert:e=>{"error"===e&&j(""),"success"===e&&b(""),"warning"===e&&p("")}}),w&&(0,u.jsx)(c.A,{type:"info",message:"Loading...",dismissAlert:()=>{}}),(0,u.jsx)("section",{id:"users",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col",children:(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"card-header",children:(0,u.jsx)("h4",{children:"Users"})}),(0,u.jsxs)("table",{className:"table table-striped",children:[(0,u.jsx)("thead",{className:"thead-inverse",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"Username"}),(0,u.jsx)("th",{children:"Email"}),(0,u.jsx)("th",{children:"Gender"}),(0,u.jsx)("th",{children:"Date Registered"}),(0,u.jsx)("th",{children:"Violation Flag"}),(0,u.jsx)("th",{children:"Fine"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsxs)("tbody",{children:[A&&(0,u.jsx)(d.A,{}),e.map((e=>!e.isAdmin&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"".concat(e.firstName," ").concat(e.lastName)}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"/admin/users/profile/".concat(e._id),title:"Visit this user",children:e.username})}),(0,u.jsx)("td",{children:e.email}),(0,u.jsx)("td",{children:e.gender}),(0,u.jsx)("td",{children:new Date(e.joined).toDateString()}),(0,u.jsx)("td",{children:e.violationFlag?"Yes":"No"}),(0,u.jsxs)("td",{children:["$",e.fines]}),(0,u.jsxs)("td",{children:[(0,u.jsx)("button",{onClick:()=>(async e=>{try{await r.A.get("/api/admin/users/delete/".concat(e)).then((e=>{if(e.data.error)return j(e.data.error);b(e.data.success),F(a)}))}catch(s){j("Failed to delete user...")}})(e._id),title:e.bookIssueInfo.length>0?"This user has books in possession. Are you sure to delete this user?":"Delete User",className:"btn btn-sm btn-danger",children:(0,u.jsx)("i",{className:"fa fa-trash"})}),(0,u.jsx)("button",{onClick:()=>(async e=>{try{await r.A.get("/api/admin/users/flagged/".concat(e)).then((e=>{e.data.warning?p(e.data.warning):b(e.data.success),F(a)}))}catch(s){j("Failed to flag user.")}})(e._id),title:e.violationFlag?"Lift the flag":"Warn user",className:"btn btn-sm ".concat(e.violationFlag?"btn-warning":"btn-success"),children:(0,u.jsx)("i",{className:"fa fa-flag"})})]})]},e._id)))]})]}),m>1&&(0,u.jsx)("nav",{className:"mx-auto mb-2",children:(0,u.jsxs)("ul",{className:"pagination",children:[(0,u.jsx)("li",{className:"page-item ".concat(1===a?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>i(1),disabled:1===a,children:"First"})}),Array.from({length:Math.min(5,m)},((e,s)=>{let t;return t=a<=3?s+1:a>m-3?m-4+s:a-2+s,t<=0||t>m?null:(0,u.jsx)("li",{className:"page-item ".concat(t===a?"active":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>i(t),children:t})},t)})),(0,u.jsx)("li",{className:"page-item ".concat(a===m?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:()=>i(m),disabled:a===m,children:"Last"})})]})})]})})})})})]})})}},314:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var t=a(43),n=a(213),r=a(216),i=a(475),l=a(579);const c=()=>{const[e,s]=(0,t.useState)([]),[a,c]=(0,t.useState)(),o=async()=>{try{const e=await n.A.get("/api/global"),a=await e.data;s(a.global),c(a.currentUser)}catch(e){console.error("Error fetching data",e)}};(0,t.useEffect)((()=>{o();const e=setInterval((()=>{o()}),6e4);return()=>clearInterval(e)}),[]);const d=(0,r.Zp)();return(0,l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-0 sticky-top",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("a",{className:"navbar-brand",href:"/admin",children:"Home"}),(0,l.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,l.jsx)("span",{className:"navbar-toggler-icon"})}),(0,l.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,l.jsxs)("ul",{className:"navbar-nav",children:[(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/books/bookInventory/",id:"book_inventory",title:"Book Inventory",className:"nav-link",children:"Book Inventory"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/1/users/",id:"users_list",title:"Users",className:"nav-link",children:"Users"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/1/addbook",id:"add_book",title:"Add Books",className:"nav-link",children:"Add Books"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/stockout",id:"stock_out",title:"Stock Out",className:"nav-link",children:["StockOut\xa0",(0,l.jsx)("span",{className:"badge badge-danger",children:e.stock?e.stock:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/request",id:"request",title:"request",className:"nav-link",children:["Request\xa0",(0,l.jsx)("span",{className:"badge badge-success",children:e.reqbook?e.reqbook:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/return",id:"return",title:"return",className:"nav-link",children:["Return\xa0",(0,l.jsx)("span",{className:"badge badge-warning",children:e.return?e.return:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/books",title:"Browse Books",className:"nav-link",children:"Browse Books"})})]}),(0,l.jsx)("ul",{className:"navbar-nav ml-auto",children:a?(0,l.jsxs)("li",{className:"nav-item dropdown mr-3",children:[(0,l.jsxs)("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown",id:"admin-drop-down",children:[(0,l.jsx)("i",{className:"fa fa-user"})," Welcome ",a.username]}),(0,l.jsxs)("div",{className:"dropdown-menu",children:[(0,l.jsxs)(i.N_,{to:"/admin/1/profile",title:"profile",className:"dropdown-item",children:[(0,l.jsx)("i",{className:"fa fa-user-circle"})," Profile"]}),(0,l.jsxs)("a",{href:"",onClick:e=>(async e=>{try{e.preventDefault(),await n.A.get("/auth/1/user-logout"),d("/")}catch(s){d("/")}})(e),className:"dropdown-item",children:[(0,l.jsx)("i",{className:"fa fa-user-times"})," Logout"]}),(0,l.jsxs)(i.N_,{className:"dropdown-item",to:"/user/dashboard/1",children:[(0,l.jsx)("i",{className:"fa fa-gear"})," User Dashboard"]})]})]}):(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsxs)("a",{href:"/login",className:"nav-link",children:[(0,l.jsx)("i",{className:"fa fa-gear"})," ProfileLogin"]})})})]})]})})}},466:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});a(43);var t=a(579);const n=e=>{let{error:s,success:a,warning:n,dismissAlert:r}=e;return(0,t.jsxs)("div",{className:"container my-2 sticky-top",children:[s&&s.length>0&&(0,t.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[s,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>r("error"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),a&&a.length>0&&(0,t.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[a,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>r("success"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),n&&n.length>0&&(0,t.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[n,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>r("warning"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}},446:(e,s,a)=>{var t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,o=parseInt,d="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,u="object"==typeof self&&self&&self.Object===Object&&self,m=d||u||Function("return this")(),h=Object.prototype.toString,x=Math.max,j=Math.min,f=function(){return m.Date.now()};function b(e){var s=typeof e;return!!e&&("object"==s||"function"==s)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==n}(e))return t;if(b(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=b(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var a=l.test(e);return a||c.test(e)?o(e.slice(2),a?2:8):i.test(e)?t:+e}e.exports=function(e,s,a){var t,n,r,i,l,c,o=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(s){var a=t,r=n;return t=n=void 0,o=s,i=e.apply(r,a)}function p(e){var a=e-c;return void 0===c||a>=s||a<0||u&&e-o>=r}function N(){var e=f();if(p(e))return v(e);l=setTimeout(N,function(e){var a=s-(e-c);return u?j(a,r-(e-o)):a}(e))}function v(e){return l=void 0,m&&t?h(e):(t=n=void 0,i)}function k(){var e=f(),a=p(e);if(t=arguments,n=this,c=e,a){if(void 0===l)return function(e){return o=e,l=setTimeout(N,s),d?h(e):i}(c);if(u)return l=setTimeout(N,s),h(c)}return void 0===l&&(l=setTimeout(N,s)),i}return s=g(s)||0,b(a)&&(d=!!a.leading,r=(u="maxWait"in a)?x(g(a.maxWait)||0,s):r,m="trailing"in a?!!a.trailing:m),k.cancel=function(){void 0!==l&&clearTimeout(l),o=0,t=c=n=l=void 0},k.flush=function(){return void 0===l?i:v(f())},k}}}]);
//# sourceMappingURL=916.a4458ed2.chunk.js.map