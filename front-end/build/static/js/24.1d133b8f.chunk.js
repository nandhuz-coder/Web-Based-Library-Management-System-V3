"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[24],{24:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var t=s(43),r=s(213),n=s(216),l=s(578),c=s(652),i=s(466),o=s(579);const d=()=>{const{bookid:e}=(0,n.g)(),[a,s]=(0,t.useState)({}),[d,m]=(0,t.useState)(""),[h,u]=(0,t.useState)(""),[x,p]=(0,t.useState)(null),[b,j]=(0,t.useState)(!1),[g,N]=(0,t.useState)(""),[v,f]=(0,t.useState)([]),[y,k]=(0,t.useState)(null),[w,S]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const a=await r.A.get("/api/books/details/".concat(e)),t=await a.data;if(t.error)return j(t.IsUser),void m(t.error);j(t.IsUser),s(t.book),p(t.user),f(t.book.comments?t.book.comments:[])}catch(d){console.log("Error fetching book details:",d)}})()}),[e]);const C=async e=>{e.preventDefault();try{const{data:e}=await r.A.post("/api/user/books/details/edit/".concat(a._id,"/").concat(y),{text:w});if(e.error)return m(e.error);f(e.comments),u(e.success),k(null),S("")}catch(d){console.error("Error editing comment:",d)}},A=e=>{S(e.target.value)};return(0,o.jsxs)(o.Fragment,{children:[b?(0,o.jsx)(l.A,{}):(0,o.jsx)(c.A,{}),(0,o.jsx)(i.A,{error:d,dismissAlert:()=>m("")}),(0,o.jsx)(i.A,{success:h,dismissAlert:()=>u("")}),(0,o.jsx)("div",{className:"container mt-3",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsxs)("div",{className:"col-md-10",children:[(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header",style:{background:"rgb(100, 170, 236)"},children:(0,o.jsx)("h4",{className:"text-center",style:{color:"green"},children:a.title})}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"Author: "}),a.author]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"ISBN: "}),a.ISBN]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"Category: "}),a.category]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"In Stock: "}),a.stock]}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("h6",{className:"card-text",style:{color:"blue"},children:a.description})})]}),(0,o.jsxs)("div",{className:"card my-3 bg-light",children:[b&&x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"p-3",children:(0,o.jsx)("button",{className:"btn btn-primary float-right",type:"button","data-toggle":"collapse","data-target":"#collapseCommentBox","aria-expanded":"false","aria-controls":"collapseCommentBox",children:"Leave a comment"})}),(0,o.jsx)("div",{className:"collapse",id:"collapseCommentBox",children:(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await r.A.post("/api/user/books/details/".concat(a._id,"/comment"),{comment:g});if(e.error)return m(e.error);u(e.success),f(e.comments),N("")}catch(d){console.error("Error submitting comment:",d)}},children:[(0,o.jsx)("textarea",{name:"comment",className:"form-control",value:g,onChange:e=>{N(e.target.value)}}),(0,o.jsx)("input",{type:"submit",className:"btn btn-outline-success btn-sm m-1 float-right"})]})})]}),(0,o.jsx)("ul",{className:"list-group list-group-flush",children:v.map((e=>(0,o.jsxs)("li",{className:"list-group-item",children:[(0,o.jsx)("strong",{children:e.author.username}),(0,o.jsx)("span",{children:(0,o.jsxs)("em",{children:[" at ",new Date(e.date).toDateString()]})}),(0,o.jsx)("p",{children:e.text}),b&&x&&(e.author.id===x._id||x.isAdmin)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{id:"edit",className:"btn btn-primary px-1 py-0",onClick:()=>{return a=e._id,s=e.text,k(a),void S(s);var a,s},children:(0,o.jsx)("i",{className:"fa fa-pencil"})}),(0,o.jsx)("form",{className:"d-inline",onSubmit:s=>{s.preventDefault(),(async e=>{try{const{data:s}=await r.A.delete("/api/user/books/details/delete/".concat(a._id,"/").concat(e));if(s.error)return m(s.error);u(s.success),f(s.comments)}catch(d){console.error("Error deleting comment:",d)}})(e._id)},children:(0,o.jsx)("button",{className:"btn btn-sm btn-danger px-1 py-0",children:(0,o.jsx)("i",{className:"fa fa-trash"})})}),y===e._id&&(0,o.jsx)("div",{id:"editCommentBox",children:(0,o.jsxs)("form",{onSubmit:C,children:[(0,o.jsx)("textarea",{name:"comment[text]",className:"form-control",value:w,onChange:A}),(0,o.jsx)("input",{type:"submit",className:"btn btn-outline-success btn-sm m-1 float-right"})]})})]})]},e._id)))})]})]})})})]})}},578:(e,a,s)=>{s.d(a,{A:()=>i});var t=s(43),r=s(216),n=s(475),l=s(213),c=s(579);const i=()=>{const[e,a]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const e=await l.A.get("/api/global/user");a(e.data.user)}catch(e){console.error("Error fetching user data:",e)}})()}),[]);const s=(0,r.Zp)();return(0,c.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-0",children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)(n.N_,{className:"navbar-brand",to:"/user/dashboard/1",children:"Home"}),(0,c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,c.jsx)("span",{className:"navbar-toggler-icon"})}),(0,c.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,c.jsx)("ul",{className:"navbar-nav",children:(0,c.jsx)("li",{className:"nav-item px-2",children:(0,c.jsx)(n.N_,{className:"nav-link",to:"/books/",children:"Browse Books"})})}),e&&e.isAdmin&&(0,c.jsx)("ul",{className:"navbar-nav",children:(0,c.jsx)("li",{className:"nav-item px-2",children:(0,c.jsx)(n.N_,{className:"nav-link",to:"/admin",children:"Admin Dashboard"})})}),e&&(0,c.jsxs)("ul",{className:"navbar-nav ml-auto",children:[e.violationFlag&&(0,c.jsx)("li",{className:"nav-item align-self-center mr-2",children:(0,c.jsx)("i",{className:"fa fa-flag text-danger"})}),(0,c.jsxs)("li",{className:"nav-item dropdown mr-3",children:[(0,c.jsxs)("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown",children:[(0,c.jsx)("i",{className:"fa fa-user"})," Welcome ",e.username]}),(0,c.jsxs)("div",{className:"dropdown-menu",children:[(0,c.jsxs)(n.N_,{to:"/user/1/profile",className:"dropdown-item",children:[(0,c.jsx)("i",{className:"fa fa-user-circle"})," Profile"]}),(0,c.jsxs)("a",{href:"",className:"dropdown-item",onClick:e=>(async e=>{try{e.preventDefault(),await l.A.get("/auth/1/user-logout"),s("/")}catch(a){s("/")}})(e),children:[(0,c.jsx)("i",{className:"fa fa-user-times"})," Logout"]})]})]}),(0,c.jsx)("li",{className:"nav-item",children:(0,c.jsxs)(n.N_,{to:"/user/1/notification",className:"nav-link",children:[(0,c.jsx)("i",{className:"fa fa-bell"}),(0,c.jsx)("span",{className:"badge badge-danger badge-pill",children:"2"})]})})]})]})]})})}},466:(e,a,s)=>{s.d(a,{A:()=>r});s(43);var t=s(579);const r=e=>{let{error:a,success:s,warning:r,dismissAlert:n}=e;return(0,t.jsxs)("div",{className:"container my-2 sticky-top",children:[a&&a.length>0&&(0,t.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[a,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("error"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),s&&s.length>0&&(0,t.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[s,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("success"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),r&&r.length>0&&(0,t.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[r,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("warning"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}},652:(e,a,s)=>{s.d(a,{A:()=>n});s(43);var t=s(475),r=s(579);const n=()=>(0,r.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark sticky-top",children:[(0,r.jsxs)("a",{className:"navbar-brand",href:"#",children:[(0,r.jsx)("img",{src:"/image/other/purepng.com-booksbookillustratedwrittenprintedliteratureclipart-1421526451707uyace.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),"Library Management System"]}),(0,r.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,r.jsx)("span",{className:"navbar-toggler-icon"})}),(0,r.jsxs)("div",{className:"collapse navbar-collapse",children:[(0,r.jsxs)("ul",{className:"navbar-nav mr-auto",children:[(0,r.jsx)("li",{className:"nav-item pl-2",children:(0,r.jsx)(t.N_,{className:"btn btn-success",to:"/auth/user-login",children:"Login"})}),(0,r.jsx)("li",{className:"nav-item pl-2",children:(0,r.jsx)(t.N_,{className:"btn btn-success",to:"/auth/user-signup",children:"User Sign Up"})}),(0,r.jsx)("li",{className:"nav-item pl-2",children:(0,r.jsx)(t.N_,{className:"btn btn-success",to:"/books/",children:"Browse Books"})})]}),(0,r.jsx)("form",{className:"form-inline my-2 my-lg-0",children:(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search","aria-label":"Search",style:{marginRight:"0px"}}),(0,r.jsx)("div",{className:"input-group-append",children:(0,r.jsx)("button",{className:"btn btn-secondary btn-search",type:"button",children:(0,r.jsx)("i",{className:"fa fa-search"})})})]})})]})]})}}]);
//# sourceMappingURL=24.1d133b8f.chunk.js.map