"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[884],{884:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var r=s(43),t=s(213),n=s(466),l=s(652),c=s(216),i=s(579);const o=e=>{let{IfUser:a}=e;const s=(0,c.Zp)(),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,p]=(0,r.useState)({username:"",password:""}),[b,g]=(0,r.useState)(!1),[x,j]=(0,r.useState)(!1),[N,v]=(0,r.useState)(!1),[f,y]=(0,r.useState)(60),[w,k]=(0,r.useState)(0),[S,T]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[O,A]=(0,r.useState)(""),[B,z]=(0,r.useState)("");(0,r.useEffect)((()=>{t.A.get("/api/auth/otp-login").then((e=>{g(e.data.otp)}))}),[]),(0,r.useEffect)((()=>{let e;return N&&(e=setInterval((()=>{y((a=>a<=1?(clearInterval(e),v(!1),60):a-1))}),1e3)),()=>clearInterval(e)}),[N]);const L=e=>{const{name:a,value:s}=e.target;p({...h,[a]:s})};return(0,i.jsxs)("section",{style:{background:'url("/image/other/2.jpg") no-repeat center center fixed',backgroundSize:"100% 100%",WebkitBackgroundSize:"100% 100%",MozBackgroundSize:"100% 100%",OBackgroundSize:"100% 100%",MsBackgroundSize:"100% 100%"},children:[(0,i.jsx)(a,{}),(0,i.jsx)(l.A,{}),(0,i.jsx)(n.A,{success:o,error:m,dismissAlert:e=>{"error"===e?u(""):"success"===e&&d("")}}),(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-6 offset-md-3",children:(0,i.jsxs)("div",{className:"card",style:{marginTop:"5%",marginBottom:"5%"},children:[(0,i.jsx)("div",{className:"card-header text-center",children:(0,i.jsx)("h4",{children:"User Login"})}),(0,i.jsx)("div",{className:"card-block",children:(0,i.jsxs)("form",{className:"p-3",onSubmit:async e=>{e.preventDefault();try{const e=await t.A.post("/auth/user-login",h);e.data.success?(d(e.data.success),setTimeout((()=>{s("/user/dashboard/1")}),700)):u(e.data.error)}catch(m){console.error("There was an error logging in:",m),u("There was an error logging in.")}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"username",className:"form-control-label",children:"Username"}),(0,i.jsx)("input",{type:"text",id:"username",name:"username",placeholder:"Username",className:"form-control",required:!0,value:h.username,onChange:L})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",className:"form-control-label",children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Password",className:"form-control",required:!0,value:h.password,onChange:L})]}),b&&(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{type:"button",onClick:async()=>{if(!N)try{P(!0);const e=await t.A.post("/api/auth/generate-otp",h);if(e.data.error)return u(e.data.error);e.data.success&&d(e.data.success),z(e.data.secret),P(!1),j(!0),v(!0),k(0)}catch(m){console.error("There was an error generating OTP:",m),u("There was an error generating OTP."),P(!1)}},disabled:N||C,className:"btn btn-primary btn-block",children:C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner",role:"status"}),(0,i.jsx)("span",{className:"sr-only",children:"Loading..."})]}):N?"Wait ".concat(f," seconds"):"Get OTP"}),x&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"otp",className:"form-control-label",children:"OTP"}),(0,i.jsx)("input",{type:"text",id:"otp",name:"otp",placeholder:"OTP",className:"form-control",required:!0,value:O,onChange:e=>{A(e.target.value)},maxLength:6}),(0,i.jsx)("button",{type:"button",onClick:async()=>{if(w>=5)u("Maximum verification attempts reached.");else{try{P(!0);(await t.A.post("/api/auth/verify-otp",{otp:O,secret:B})).data.valid?(d("OTP matched successfully!"),j(!1),T(!0)):(u("OTP did not match!"),T(!1)),P(!1)}catch(m){console.error("There was an error matching OTP:",m),u("There was an error matching OTP."),P(!1)}k(w+1)}},disabled:6!==O.length||C,className:"btn btn-secondary btn-block",children:C?(0,i.jsx)("div",{className:"spinner",role:"status"}):"Verify OTP"})]})]}),(0,i.jsx)("button",{type:"submit",id:"submit_btn",className:"btn btn-success btn-block",disabled:b&&!S,children:"Login!"})]})})]})})})})]})}},466:(e,a,s)=>{s.d(a,{A:()=>t});s(43);var r=s(579);const t=e=>{let{error:a,success:s,warning:t,dismissAlert:n}=e;return(0,r.jsxs)("div",{className:"container my-2 sticky-top",children:[a&&a.length>0&&(0,r.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[a,(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("error"),children:(0,r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),s&&s.length>0&&(0,r.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[s,(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("success"),children:(0,r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),t&&t.length>0&&(0,r.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[t,(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("warning"),children:(0,r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}},652:(e,a,s)=>{s.d(a,{A:()=>n});s(43);var r=s(475),t=s(579);const n=()=>(0,t.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark sticky-top",children:[(0,t.jsxs)("a",{className:"navbar-brand",href:"#",children:[(0,t.jsx)("img",{src:"/image/other/purepng.com-booksbookillustratedwrittenprintedliteratureclipart-1421526451707uyace.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),"Library Management System"]}),(0,t.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,t.jsx)("span",{className:"navbar-toggler-icon"})}),(0,t.jsxs)("div",{className:"collapse navbar-collapse",children:[(0,t.jsxs)("ul",{className:"navbar-nav mr-auto",children:[(0,t.jsx)("li",{className:"nav-item pl-2",children:(0,t.jsx)(r.N_,{className:"btn btn-success",to:"/auth/user-login",children:"Login"})}),(0,t.jsx)("li",{className:"nav-item pl-2",children:(0,t.jsx)(r.N_,{className:"btn btn-success",to:"/auth/user-signup",children:"User Sign Up"})}),(0,t.jsx)("li",{className:"nav-item pl-2",children:(0,t.jsx)(r.N_,{className:"btn btn-success",to:"/books/",children:"Browse Books"})})]}),(0,t.jsx)("form",{className:"form-inline my-2 my-lg-0",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search","aria-label":"Search",style:{marginRight:"0px"}}),(0,t.jsx)("div",{className:"input-group-append",children:(0,t.jsx)("button",{className:"btn btn-secondary btn-search",type:"button",children:(0,t.jsx)("i",{className:"fa fa-search"})})})]})})]})]})}}]);
//# sourceMappingURL=884.fe6446ee.chunk.js.map