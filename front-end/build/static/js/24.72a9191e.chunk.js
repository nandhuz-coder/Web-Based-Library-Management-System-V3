"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[24],{24:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(43),n=s(213),c=s(216),o=s(579);const l=()=>{const{bookid:e}=(0,c.g)(),[t,s]=(0,a.useState)({}),[l,r]=(0,a.useState)(null),[i,d]=(0,a.useState)(""),[m,h]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{await n.A.get("/api/books/details/".concat(e)).then((async e=>{const t=await e.data;s(t.book),r(t.user),h(t.book.comments?t.book.comments:[])}))}catch(t){console.log("Error fetching book details:",t)}})()}),[e]);return(0,o.jsx)("div",{className:"container mt-3",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsxs)("div",{className:"col-md-10",children:[(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header",style:{background:"rgb(100, 170, 236)"},children:(0,o.jsx)("h4",{className:"text-center",style:{color:"green"},children:t.title})}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"Author: "}),t.author]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"ISBN: "}),t.ISBN]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"Category: "}),t.category]}),(0,o.jsxs)("h5",{className:"px-3 py-2",children:[(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"In Stock: "}),t.stock]}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("h6",{className:"card-text",style:{color:"blue"},children:t.description})})]}),(0,o.jsxs)("div",{className:"card my-3 bg-light",children:[l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"p-3",children:(0,o.jsx)("button",{className:"btn btn-primary float-right",type:"button","data-toggle":"collapse","data-target":"#collapseCommentBox","aria-expanded":"false","aria-controls":"collapseCommentBox",children:"Leave a comment"})}),(0,o.jsx)("div",{className:"collapse",id:"collapseCommentBox",children:(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await n.A.post("/api/books/".concat(t._id,"/comment"),{comment:i});h(e.comments),d("")}catch(s){console.error("Error submitting comment:",s)}},children:[(0,o.jsx)("textarea",{name:"comment",className:"form-control",value:i,onChange:e=>{d(e.target.value)}}),(0,o.jsx)("input",{type:"submit",className:"btn btn-outline-success btn-sm m-1 float-right"})]})})]}),(0,o.jsx)("ul",{className:"list-group list-group-flush",children:m.map((e=>(0,o.jsxs)("li",{className:"list-group-item",children:[(0,o.jsx)("strong",{children:e.author.username}),(0,o.jsx)("span",{children:(0,o.jsxs)("em",{children:[" at ",new Date(e.date).toDateString()]})}),(0,o.jsx)("p",{children:e.text}),l&&e.author.id===l._id&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{id:"edit",className:"btn btn-primary px-1 py-0",children:(0,o.jsx)("i",{className:"fa fa-pencil"})}),(0,o.jsx)("form",{className:"d-inline",onSubmit:s=>{s.preventDefault(),(async e=>{try{const{data:s}=await n.A.delete("/api/books/".concat(t._id,"/comments/").concat(e));h(s.comments)}catch(s){console.error("Error deleting comment:",s)}})(e._id)},children:(0,o.jsx)("button",{className:"btn btn-sm btn-danger px-1 py-0",children:(0,o.jsx)("i",{className:"fa fa-trash"})})}),(0,o.jsx)("div",{className:"d-none",id:"editCommentBox",children:(0,o.jsxs)("form",{onSubmit:s=>{s.preventDefault(),(async(e,s)=>{try{const{data:a}=await n.A.put("/api/books/".concat(t._id,"/comments/").concat(e),{text:s});h(a.comments)}catch(a){console.error("Error editing comment:",a)}})(e._id,e.text)},children:[(0,o.jsx)("textarea",{name:"comment[text]",className:"form-control",defaultValue:e.text}),(0,o.jsx)("input",{type:"submit",className:"btn btn-outline-success btn-sm m-1 float-right"})]})})]})]},e._id)))})]})]})})})}}}]);
//# sourceMappingURL=24.72a9191e.chunk.js.map