"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[946],{946:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var t=a(43),r=a(216),n=a(475),i=a(213),l=a(466),o=a(314),c=a(843),d=a(579);const m=()=>{const{user_id:e}=(0,r.g)(),[s,a]=(0,t.useState)({}),[m,u]=(0,t.useState)([]),[h,g]=(0,t.useState)([]),[x,j]=(0,t.useState)(""),[p,N]=(0,t.useState)(""),[v,b]=(0,t.useState)(!0),[f,k]=(0,t.useState)(!0);(0,t.useEffect)((()=>{i.A.get("/admin/1/users/profile/".concat(e)).then((e=>{if(e.data.NoRender)b(!1),j(e.data.error);else{const{user:s,issues:t,activities:r}=e.data;a(s),u(t),g(r)}})).catch((e=>{j("Error fetching data"),console.error(e)})).finally((()=>k(!1)))}),[e]);const y=e=>{"error"===e?j(""):"success"===e&&N("")};return v?(0,d.jsx)("div",{children:(0,d.jsxs)(t.Suspense,{fallback:(0,d.jsx)(c.A,{}),children:[(0,d.jsx)(o.A,{}),(0,d.jsxs)("div",{className:"container mt-5 pt-2",children:[p&&(0,d.jsx)(l.A,{success:p,dismissAlert:y}),x&&(0,d.jsx)(l.A,{error:x,dismissAlert:y}),f&&(0,d.jsx)(c.A,{}),(0,d.jsxs)("div",{className:"row",style:{marginBottom:"20px"},children:[(0,d.jsx)("div",{className:"col-md-3",children:(0,d.jsx)("img",{src:"/images/user-profile/".concat(s.image),className:"card-img-top",alt:"User Profile"})}),(0,d.jsxs)("div",{className:"col-md-6",style:{border:"1px solid black"},children:[(0,d.jsx)("h4",{className:"text-center card-header pb-3",style:{background:"rgb(219, 167, 35)"},children:"Personal Information"}),(0,d.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,d.jsxs)("li",{className:"list-group-item",children:["First Name: ",s.firstName]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Last Name: ",s.lastName]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Username: ",s.username]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Joined: ",new Date(s.joined).toDateString()]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Email: ",s.email]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Issued books: ",m.map(((e,s)=>(0,d.jsxs)("span",{children:[e.book_info.title,s<m.length-1?", ":""]},s)))]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Address: ",s.address]}),(0,d.jsxs)("li",{className:"list-group-item text-danger font-weight-bold",children:["Violation Flag: ",null!==s&&void 0!==s&&s.violationFlag?s.violationFlag.toString():"False"]}),(0,d.jsxs)("li",{className:"list-group-item",children:["Due Fines: $",s.fines]})]})]}),(0,d.jsx)("div",{className:"col-md-3",children:(0,d.jsxs)("div",{className:"card",style:{width:"18rem"},children:[(0,d.jsx)("div",{className:"card-header text-center",children:(0,d.jsx)("strong",{children:"Recent activities"})}),(0,d.jsxs)("ul",{className:"list-group list-group-flush",children:[h.slice(0,5).map(((e,a)=>(0,d.jsxs)("li",{className:"list-group-item",children:["Issue"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," issued ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Return"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," returned ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Request"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," requested ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Decline"===e.category&&(0,d.jsxs)(d.Fragment,{children:["Admin declined ",e.info.title," request of ",s.username," at ",new Date(e.entryTime).toDateString()]}),"Renew"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," renewed ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Rturn apply"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," return request ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Return decline"===e.category&&(0,d.jsxs)(d.Fragment,{children:["Admin denied ",s.username,"'s return of ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Update Profile"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," updated profile at ",new Date(e.entryTime).toDateString()]}),"Update Password"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," updated password at ",new Date(e.entryTime).toDateString()]}),"Upload Photo"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," uploaded photo at ",new Date(e.entryTime).toDateString()]}),"Comment"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," commented on ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Update Comment"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," updated comment on ",e.info.title," at ",new Date(e.entryTime).toDateString()]}),"Delete Comment"===e.category&&(0,d.jsxs)(d.Fragment,{children:[s.username," deleted comment on ",e.info.title," at ",new Date(e.entryTime).toDateString()]})]},a))),h.length>5&&(0,d.jsx)(n.N_,{to:"/admin/users/activities/".concat(s._id),className:"btn btn-primary btn-block",children:"See all..."})]})]})})]})]})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.A,{}),(0,d.jsx)("div",{className:"container d-flex justify-content-center align-items-center min-vh-100",children:(0,d.jsxs)("div",{className:"error-section text-center",children:[(0,d.jsx)("div",{className:"search-icon",children:"\ud83d\udd0d"}),(0,d.jsx)("div",{className:"error-text",children:"User Not Available"}),(0,d.jsx)("div",{className:"error-description",children:"We searched the entire database but couldn't find the user you were looking for."})]})})]})}},314:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(43),r=a(213),n=a(216),i=a(475),l=a(579);const o=()=>{const[e,s]=(0,t.useState)([]),[a,o]=(0,t.useState)(),c=async()=>{try{const e=await r.A.get("/api/global"),a=await e.data;s(a.global),o(a.currentUser)}catch(e){console.error("Error fetching data",e)}};(0,t.useEffect)((()=>{c();const e=setInterval((()=>{c()}),6e4);return()=>clearInterval(e)}),[]);const d=(0,n.Zp)();return(0,l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-0 sticky-top",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("a",{className:"navbar-brand",href:"/admin",children:"Home"}),(0,l.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,l.jsx)("span",{className:"navbar-toggler-icon"})}),(0,l.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,l.jsxs)("ul",{className:"navbar-nav",children:[(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/books/bookInventory/",id:"book_inventory",title:"Book Inventory",className:"nav-link",children:"Book Inventory"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/1/users/",id:"users_list",title:"Users",className:"nav-link",children:"Users"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/admin/1/addbook",id:"add_book",title:"Add Books",className:"nav-link",children:"Add Books"})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/stockout",id:"stock_out",title:"Stock Out",className:"nav-link",children:["StockOut\xa0",(0,l.jsx)("span",{className:"badge badge-danger",children:e.stock?e.stock:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/request",id:"request",title:"request",className:"nav-link",children:["Request\xa0",(0,l.jsx)("span",{className:"badge badge-success",children:e.reqbook?e.reqbook:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsxs)(i.N_,{to:"/admin/1/book/return",id:"return",title:"return",className:"nav-link",children:["Return\xa0",(0,l.jsx)("span",{className:"badge badge-warning",children:e.return?e.return:0})]})}),(0,l.jsx)("li",{className:"nav-item px-2",children:(0,l.jsx)(i.N_,{to:"/books",title:"Browse Books",className:"nav-link",children:"Browse Books"})})]}),(0,l.jsx)("ul",{className:"navbar-nav ml-auto",children:a?(0,l.jsxs)("li",{className:"nav-item dropdown mr-3",children:[(0,l.jsxs)("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown",id:"admin-drop-down",children:[(0,l.jsx)("i",{className:"fa fa-user"})," Welcome ",a.username]}),(0,l.jsxs)("div",{className:"dropdown-menu",children:[(0,l.jsxs)(i.N_,{to:"/admin/1/profile",title:"profile",className:"dropdown-item",children:[(0,l.jsx)("i",{className:"fa fa-user-circle"})," Profile"]}),(0,l.jsxs)("a",{href:"",onClick:e=>(async e=>{try{e.preventDefault(),await r.A.get("/auth/1/user-logout"),d("/")}catch(s){d("/")}})(e),className:"dropdown-item",children:[(0,l.jsx)("i",{className:"fa fa-user-times"})," Logout"]}),(0,l.jsxs)(i.N_,{className:"dropdown-item",to:"/user/dashboard/1",children:[(0,l.jsx)("i",{className:"fa fa-gear"})," User Dashboard"]})]})]}):(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsxs)("a",{href:"/login",className:"nav-link",children:[(0,l.jsx)("i",{className:"fa fa-gear"})," ProfileLogin"]})})})]})]})})}},466:(e,s,a)=>{a.d(s,{A:()=>r});a(43);var t=a(579);const r=e=>{let{error:s,success:a,warning:r,dismissAlert:n}=e;return(0,t.jsxs)("div",{className:"container my-2 sticky-top",children:[s&&s.length>0&&(0,t.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[s,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("error"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),a&&a.length>0&&(0,t.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[a,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("success"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),r&&r.length>0&&(0,t.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[r,(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>n("warning"),children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}}}]);
//# sourceMappingURL=946.1c5f51d9.chunk.js.map