"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[533],{578:(e,a,s)=>{s.d(a,{A:()=>o});var n=s(43),r=s(216),t=s(475),l=s(213),i=s(579);const o=()=>{const[e,a]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{const e=await l.A.get("/api/global/user");a(e.data.user)}catch(e){console.error("Error fetching user data:",e)}})()}),[]);const s=(0,r.Zp)();return(0,i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-0",children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)(t.N_,{className:"navbar-brand",to:"/user/dashboard/1",children:"Home"}),(0,i.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,i.jsx)("span",{className:"navbar-toggler-icon"})}),(0,i.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,i.jsx)("ul",{className:"navbar-nav",children:(0,i.jsx)("li",{className:"nav-item px-2",children:(0,i.jsx)(t.N_,{className:"nav-link",to:"/books/",children:"Browse Books"})})}),e&&e.isAdmin&&(0,i.jsx)("ul",{className:"navbar-nav",children:(0,i.jsx)("li",{className:"nav-item px-2",children:(0,i.jsx)(t.N_,{className:"nav-link",to:"/admin",children:"Admin Dashboard"})})}),e&&(0,i.jsxs)("ul",{className:"navbar-nav ml-auto",children:[e.violationFlag&&(0,i.jsx)("li",{className:"nav-item align-self-center mr-2",children:(0,i.jsx)("i",{className:"fa fa-flag text-danger"})}),(0,i.jsxs)("li",{className:"nav-item dropdown mr-3",children:[(0,i.jsxs)("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown",children:[(0,i.jsx)("i",{className:"fa fa-user"})," Welcome ",e.username]}),(0,i.jsxs)("div",{className:"dropdown-menu",children:[(0,i.jsxs)(t.N_,{to:"/user/1/profile",className:"dropdown-item",children:[(0,i.jsx)("i",{className:"fa fa-user-circle"})," Profile"]}),(0,i.jsxs)("a",{href:"",className:"dropdown-item",onClick:e=>(async e=>{try{e.preventDefault(),await l.A.get("/auth/1/user-logout"),s("/")}catch(a){s("/")}})(e),children:[(0,i.jsx)("i",{className:"fa fa-user-times"})," Logout"]})]})]}),(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsxs)(t.N_,{to:"/user/1/notification",className:"nav-link",children:[(0,i.jsx)("i",{className:"fa fa-bell"}),(0,i.jsx)("span",{className:"badge badge-danger badge-pill",children:"2"})]})})]})]})]})})}},466:(e,a,s)=>{s.d(a,{A:()=>r});s(43);var n=s(579);const r=e=>{let{error:a,success:s,warning:r,dismissAlert:t}=e;return(0,n.jsxs)("div",{className:"container my-2 sticky-top",children:[a&&a.length>0&&(0,n.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[a,(0,n.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>t("error"),children:(0,n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),s&&s.length>0&&(0,n.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[s,(0,n.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>t("success"),children:(0,n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),r&&r.length>0&&(0,n.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[r,(0,n.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:()=>t("warning"),children:(0,n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})}},533:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var n=s(43),r=s(213),t=s(843),l=s(578),i=s(466),o=s(579);const c=()=>{const[e,a]=(0,n.useState)([]),[s,c]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0),[u,b]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),j=()=>{r.A.get("/user/books/1/return-renew").then((e=>{a(e.data.user),c(e.data.currentUser)})).catch((e=>{console.error("Error fetching data:",e),m("Failed to fetch books. Please try again later.")})).finally((()=>h(!1)))};(0,n.useEffect)((()=>{j()}),[]);return d?(0,o.jsx)(t.A,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.A,{}),(0,o.jsx)("header",{id:"main-header",className:"py-2 bg-info text-white",children:(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("h1",{children:[(0,o.jsx)("i",{className:"fa fa-retweet"})," Renew/Return"]})})})})}),(0,o.jsx)(i.A,{success:u,error:x,dismissAlert:e=>{"error"===e?m(""):"success"===e&&b("")}}),(0,o.jsx)("section",{className:"mt-4 py-3",children:(0,o.jsx)("div",{className:"container",style:{maxWidth:"80%"},children:(0,o.jsx)("div",{className:"col mx-auto",children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header text-center",children:(0,o.jsx)("h4",{children:"All Renewables/Returnables"})}),(0,o.jsxs)("table",{className:"table table-striped",children:[(0,o.jsx)("thead",{className:"thead-inverse",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Title"}),(0,o.jsx)("th",{children:"Author"}),(0,o.jsx)("th",{children:"Issue date"}),(0,o.jsx)("th",{children:"Return date"}),(0,o.jsx)("th",{children:"Category"}),(0,o.jsx)("th",{})]})}),(0,o.jsx)("tbody",{children:e.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.book_info.title}),(0,o.jsx)("td",{children:e.book_info.author}),(0,o.jsx)("td",{children:new Date(e.book_info.issueDate).toDateString()}),(0,o.jsx)("td",{children:new Date(e.book_info.returnDate).toDateString()}),(0,o.jsx)("td",{children:e.book_info.category}),(0,o.jsx)("td",{children:e.book_info.isRenewed?!e.book_info.isReturn&&(0,o.jsx)("button",{className:"btn btn-xs btn-warning disabled","aria-disabled":"true",children:"Renewed!"}):null!==s&&void 0!==s&&s.violationFlag&&new Date(e.book_info.returnDate)<Date.now()?(0,o.jsx)("button",{className:"btn btn-xs btn-warning",title:"You can't renew book when you are flagged",children:"Renew"}):e.book_info.isReturn?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"btn btn-xs btn-warning disabled","aria-disabled":"true",children:"Renew"}),(0,o.jsx)("button",{className:"btn btn-xs btn-info disabled","aria-disabled":"true",children:"Return"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"btn btn-xs btn-warning",onClick:()=>{return a=e.book_info.id,void r.A.post("/api/user/books/".concat(a,"/renew")).then((e=>{console.log("Book renewed successfully:",e.data),j(),e.data.success?b(e.data.success):m(e.data.error)})).catch((e=>{console.error("Error renewing book:",e),m("Failed to renew the book. Please try again later.")})).finally((()=>h(!1)));var a},children:"Renew"}),(0,o.jsx)("button",{className:"btn btn-xs btn-info",onClick:()=>{return a=e.book_info.id,void r.A.post("/api/user/books/return/".concat(a)).then((e=>{console.log("Book returned successfully:",e.data),j(),e.data.success?b(e.data.success):m(e.data.error)})).catch((e=>{console.error("Error returning book:",e),m("Failed to return the book. Please try again later.")})).finally((()=>h(!1)));var a},children:"Return"})]})})]},e._id)))})]})]})})})})]})}}}]);
//# sourceMappingURL=533.7a17d69a.chunk.js.map